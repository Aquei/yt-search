!function(){"use strict";var t=document,e="1.0.0",a=(t._currentScript||t.currentScript).ownerDocument,r=Object.create(HTMLElement.prototype),i="https://www.googleapis.com/youtube/v3/search",s=a.querySelector(".yt-search"),o=a.querySelector(".video-item");r.createdCallback=function(){this._init()},r.attachedCallback=function(){this._setOpt(),this._check()},r.detachedCallback=function(){"callback"in this._data.params&&window.hasOwnProperty(this._data.params.callback)&&delete window[this._data.params.callback]},r.attributeChangedCallback=function(t,e,a){switch(t){case"data-shadow-dom":"off"===a&&this._init();case"data-params":case"data-query":case"data-max-results":case"data-api-key":case"data-play-btn-txt":case"data-playing-btn-txt":case"data-theme":this._setOpt(),this._check();break;default:return}},r._setOpt=function(){var t,e={};if(this.hasAttribute("data-params"))try{e=JSON.parse(this.getAttribute("data-params"))}catch(a){if(!(a instanceof SyntaxError))throw a;console.log("有効なJSONではないためdata-paramsの値を無視します")}this.hasAttribute("data-query")&&(t=this.getAttribute("data-query"),t?e.q=t:console.error("検索キーワードが無効です")),this.hasAttribute("data-max-results")&&(t=parseInt(this.getAttribute("data-max-results")),isNaN(t)?console.error("data-max-resultsの属性値が整数値表現ではないため無視します"):e.maxResults=t),this.hasAttribute("data-api-key")&&(t=this.getAttribute("data-api-key"),t?e.key=t:console.error("data-api-keyの属性値が無効です")),"part"in e&&e.part||(e.part="snippet"),"type"in e&&e.type||(e.type="video"),"videoEmbeddable"in e&&-1!==["true","false"].indexOf(e.videoEmbeddable.toString())||(e.videoEmbeddable="true"),this._data.params=e},r._check=function(){var t=this._data.params;(t.q||t.key||t.part)&&this._run()},r._init=function(){var t="off"!==this.getAttribute("data-shadow-dom")?this.createShadowRoot():this;this._data={params:{},queryCache:{},root:t}},r._build=function(a){for(var r=t.importNode(s.content,!0),i=this._data.root,n=this,d=["cerulean","cosmo","cyborg","darkly","flatly","journal","lumen","paper","readable","sandstone","simplex","slate","spacelab","superhero","united","yeti"];i.firstChild;)i.removeChild(i.firstChild);i.appendChild(r);var c=t.createElement("style");if(this.hasAttribute("data-theme")&&-1!==d.indexOf(this.getAttribute("data-theme").toLowerCase())){var l=this.getAttribute("data-theme").toLowerCase();c.innerHTML="@import url(yt-search."+l+".css?v="+e+");",i.querySelector(".yt-search").setAttribute("data-theme",l)}else c.innerHTML="@import url(yt-search.css?v="+e+");";if(i.insertBefore(c,i.firstChild),this._data.queryCache.iframe=i.querySelector("iframe.embed-responsive-item"),this._data.queryCache.vContainer=i.querySelector(".videos"),!a.items.length)return void i.querySelector(".alert").classList.remove("hidden");if(i.querySelector(".embed-responsive").classList.remove("hidden"),i.querySelector(".well.hidden").classList.remove("hidden"),this.setVideo(a.items[0],!1,!1),a.items.length>1){var h=this._data.queryCache.vContainer;h.classList.remove("hidden");for(var u=this.getAttribute("data-play-btn-txt")||"Play",p=0,m=a.items.length;m>p;++p){var y,b=t.importNode(o.content,!0),f=a.items[p],v=f.snippet.thumbnails;y=v.hasOwnProperty("high")?v.high.url:v.hasOwnProperty("medium")?v.medium.url:v["default"].url,b.querySelector("img").setAttribute("src",y),b.querySelector("h3").textContent=f.snippet.title,b.querySelector(".desc").textContent=f.snippet.description;var w=b.querySelector("a.btn");w.textContent=u;var _=this.hasAttribute("data-playing-btn-txt")?this.getAttribute("data-playing-btn-txt"):"再生中";!function(t,e,a){w.addEventListener?w.addEventListener("click",function(){var r=n._data.root.querySelector(".btn-success");r&&(r.classList.remove("btn-success"),r.classList.add("btn-primary"),r.textContent=a),this.classList.remove("btn-primary"),this.classList.add("btn-success"),this.textContent=e,n.setVideo(t,!0)},!1):w.attachEvent&&w.attachEvent("onclick",function(){this.classList.remove("btn-primary"),this.classList.add("btn-success"),this.textContent=e,n.setVideo(t,!0)})}(f,_,u),h.appendChild(b)}}},r.setVideo=function(t,e,a,r){var i=this._data.queryCache.iframe,s="https://www.youtube.com/embed/",o=t.id.videoId;if(e=e?1:0,-1===["dark","light"].indexOf(r)&&(r="dark"),s+=o+"?theme="+r+"&autoplay="+e,i.setAttribute("src",s),this.setAttribute("data-current-video-id",o),this.setAttribute("data-current-video-info",JSON.stringify(t)),t.hasOwnProperty("snippet")&&(this._data.root.querySelector(".well h2").textContent=t.snippet.title,this._data.root.querySelector(".well p").textContent=t.snippet.description),"on"===this.getAttribute("data-scroll")&&!a){var n=this._data.queryCache.iframe.getBoundingClientRect(),d={top:Math.round(n.top),left:Math.round(n.left),behavior:"smooth"};"scrollBehavior"in document.documentElement.style?window.scrollTo(d):window.jQuery&&jQuery.scrollTo?jQuery(window).scrollTo({top:d.top,left:d.left}):window.scrollTo(d.left,d.top)}},r._run=function(){var t,e,a,r=this,s=[],o=document.createElement("script");a=function(t){r._build(t)};for(var n=0;1e4>n;++n){if(e="yt_search_jsonp_callback_"+n,!window.hasOwnProperty(e)){window[e]=a,this._data.params.callback=e;break}if(9999===n)throw"ユニークなコールバック関数が設定できません"}for(var d in this._data.params)this._data.params.hasOwnProperty(d)&&s.push(encodeURIComponent(d)+"="+encodeURIComponent(this._data.params[d]));t=s.join("&"),o.setAttribute("src",i+"?"+t),document.querySelector("body").appendChild(o)},t.registerElement("yt-search",{prototype:r})}();