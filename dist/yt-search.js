!function(){"use strict";var t=document,e="1.0.0",a=(t._currentScript||t.currentScript).ownerDocument,r=a.baseURI.replace(/\/[^\/]*$/,""),i=Object.create(HTMLElement.prototype),s="https://www.googleapis.com/youtube/v3/search",o=a.querySelector(".yt-search"),n=a.querySelector(".video-item");i.createdCallback=function(){this._init()},i.attachedCallback=function(){this._setOpt(),this._check()},i.detachedCallback=function(){"callback"in this._data.params&&window.hasOwnProperty(this._data.params.callback)&&delete window[this._data.params.callback]},i.attributeChangedCallback=function(t,e,a){switch(t){case"data-shadow-dom":"off"===a&&this._init();case"data-params":case"data-query":case"data-max-results":case"data-api-key":case"data-play-btn-txt":case"data-playing-btn-txt":case"data-theme":this._setOpt(),this._check();break;default:return}},i._setOpt=function(){var t,e={};if(this.hasAttribute("data-params"))try{e=JSON.parse(this.getAttribute("data-params"))}catch(a){if(!(a instanceof SyntaxError))throw a;console.log("有効なJSONではないためdata-paramsの値を無視します")}this.hasAttribute("data-query")&&(t=this.getAttribute("data-query"),t?e.q=t:console.error("検索キーワードが無効です")),this.hasAttribute("data-max-results")&&(t=parseInt(this.getAttribute("data-max-results")),isNaN(t)?console.error("data-max-resultsの属性値が整数値表現ではないため無視します"):e.maxResults=t),this.hasAttribute("data-api-key")&&(t=this.getAttribute("data-api-key"),t?e.key=t:console.error("data-api-keyの属性値が無効です")),"part"in e&&e.part||(e.part="snippet"),"type"in e&&e.type||(e.type="video"),"videoEmbeddable"in e&&-1!==["true","false"].indexOf(e.videoEmbeddable.toString())||(e.videoEmbeddable="true"),this._data.params=e},i._check=function(){var t=this._data.params;(t.q||t.key||t.part)&&this._run()},i._init=function(){var t="off"!==this.getAttribute("data-shadow-dom")?this.createShadowRoot():this;this._data={params:{},queryCache:{},root:t}},i._build=function(a){for(var i=t.importNode(o.content,!0),s=this._data.root,d=this,c=["cerulean","cosmo","cyborg","darkly","flatly","journal","lumen","paper","readable","sandstone","simplex","slate","spacelab","superhero","united","yeti"];s.firstChild;)s.removeChild(s.firstChild);s.appendChild(i);var l=t.createElement("style");if(this.hasAttribute("data-theme")&&-1!==c.indexOf(this.getAttribute("data-theme").toLowerCase())){var h=this.getAttribute("data-theme").toLowerCase();l.innerHTML="@import url("+r+"/yt-search."+h+".css?v="+e+");",s.querySelector(".yt-search").setAttribute("data-theme",h)}else l.innerHTML="@import url("+r+"/yt-search.css?v="+e+");";if(s.insertBefore(l,s.firstChild),this._data.queryCache.iframe=s.querySelector("iframe.embed-responsive-item"),this._data.queryCache.vContainer=s.querySelector(".videos"),!a.items.length)return void s.querySelector(".alert").classList.remove("hidden");if(s.querySelector(".embed-responsive").classList.remove("hidden"),s.querySelector(".well.hidden").classList.remove("hidden"),this.setVideo(a.items[0],!1,!1),a.items.length>1){var u=this._data.queryCache.vContainer;u.classList.remove("hidden");for(var p=this.getAttribute("data-play-btn-txt")||"Play",m=0,y=a.items.length;y>m;++m){var b,f=t.importNode(n.content,!0),v=a.items[m],w=v.snippet.thumbnails;b=w.hasOwnProperty("high")?w.high.url:w.hasOwnProperty("medium")?w.medium.url:w["default"].url,f.querySelector("img").setAttribute("src",b),f.querySelector("h3").textContent=v.snippet.title,f.querySelector(".desc").textContent=v.snippet.description;var _=f.querySelector("a.btn");_.textContent=p;var C=this.hasAttribute("data-playing-btn-txt")?this.getAttribute("data-playing-btn-txt"):"再生中";!function(t,e,a){_.addEventListener?_.addEventListener("click",function(){var r=d._data.root.querySelector(".btn-success");r&&(r.classList.remove("btn-success"),r.classList.add("btn-primary"),r.textContent=a),this.classList.remove("btn-primary"),this.classList.add("btn-success"),this.textContent=e,d.setVideo(t,!0)},!1):_.attachEvent&&_.attachEvent("onclick",function(){this.classList.remove("btn-primary"),this.classList.add("btn-success"),this.textContent=e,d.setVideo(t,!0)})}(v,C,p),u.appendChild(f)}}},i.setVideo=function(t,e,a,r){var i=this._data.queryCache.iframe,s="https://www.youtube.com/embed/",o=t.id.videoId;if(e=e?1:0,-1===["dark","light"].indexOf(r)&&(r="dark"),s+=o+"?theme="+r+"&autoplay="+e,i.setAttribute("src",s),this.setAttribute("data-current-video-id",o),this.setAttribute("data-current-video-info",JSON.stringify(t)),t.hasOwnProperty("snippet")&&(this._data.root.querySelector(".well h2").textContent=t.snippet.title,this._data.root.querySelector(".well p").textContent=t.snippet.description),"on"===this.getAttribute("data-scroll")&&!a){var n=this.getBoundingClientRect(),d={top:Math.round(n.top),left:Math.round(n.left),behavior:"smooth"};"scrollBehavior"in document.documentElement.style?window.scrollTo(d):window.jQuery&&jQuery.scrollTo?jQuery(window).scrollTo({top:d.top,left:d.left}):window.scrollTo(d.left,d.top)}},i._run=function(){var t,e,a,r=this,i=[],o=document.createElement("script");a=function(t){r._build(t)};for(var n=0;1e4>n;++n){if(e="yt_search_jsonp_callback_"+n,!window.hasOwnProperty(e)){window[e]=a,this._data.params.callback=e;break}if(9999===n)throw"ユニークなコールバック関数が設定できません"}for(var d in this._data.params)this._data.params.hasOwnProperty(d)&&i.push(encodeURIComponent(d)+"="+encodeURIComponent(this._data.params[d]));t=i.join("&"),o.setAttribute("src",s+"?"+t),document.querySelector("body").appendChild(o)},t.registerElement("yt-search",{prototype:i})}();